<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>5&nbsp; ISA 1: entering, importing, summarizing and subsetting data – R for the PPL(E)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./summary.html" rel="next">
<link href="./4_r_knitting.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-364982630eef5352dd1537128a8ed5cb.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./5_r_ISA1.html">Introduction to Statistical Analysis (Y1)</a></li><li class="breadcrumb-item"><a href="./5_r_ISA1.html"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">ISA 1: entering, importing, summarizing and subsetting data</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">R for the PPL(E)</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/dvlaming/R4PPLE" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">The basics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./1_r_markdown_basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Installation and introduction to R Markdown documents</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./2_r_firstdata.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">The basics of datawrangling in the <code>tidyverse</code></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./3_r_plotting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">An introduction to graphics with <code>ggplot2</code></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./4_r_knitting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">“Knitting” everything togther into a document</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Introduction to Statistical Analysis (Y1)</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./5_r_ISA1.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">ISA 1: entering, importing, summarizing and subsetting data</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./summary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Summary</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#r-outcomes" id="toc-r-outcomes" class="nav-link active" data-scroll-target="#r-outcomes"><span class="header-section-number">5.1</span> R outcomes</a></li>
  <li><a href="#required-packages" id="toc-required-packages" class="nav-link" data-scroll-target="#required-packages"><span class="header-section-number">5.2</span> Required packages</a></li>
  <li><a href="#first-create-a-project" id="toc-first-create-a-project" class="nav-link" data-scroll-target="#first-create-a-project"><span class="header-section-number">5.3</span> First, create a project!</a></li>
  <li><a href="#entering-data" id="toc-entering-data" class="nav-link" data-scroll-target="#entering-data"><span class="header-section-number">5.4</span> Entering data</a></li>
  <li><a href="#measures-of-central-tendency" id="toc-measures-of-central-tendency" class="nav-link" data-scroll-target="#measures-of-central-tendency"><span class="header-section-number">5.5</span> Measures of central tendency</a>
  <ul class="collapse">
  <li><a href="#the-arithmetic-mean" id="toc-the-arithmetic-mean" class="nav-link" data-scroll-target="#the-arithmetic-mean"><span class="header-section-number">5.5.1</span> The arithmetic mean</a></li>
  <li><a href="#the-median" id="toc-the-median" class="nav-link" data-scroll-target="#the-median"><span class="header-section-number">5.5.2</span> The median</a></li>
  <li><a href="#the-mode" id="toc-the-mode" class="nav-link" data-scroll-target="#the-mode"><span class="header-section-number">5.5.3</span> The mode</a></li>
  </ul></li>
  <li><a href="#importing-existing-data" id="toc-importing-existing-data" class="nav-link" data-scroll-target="#importing-existing-data"><span class="header-section-number">5.6</span> Importing existing data</a></li>
  <li><a href="#summarizing-data" id="toc-summarizing-data" class="nav-link" data-scroll-target="#summarizing-data"><span class="header-section-number">5.7</span> Summarizing data</a>
  <ul class="collapse">
  <li><a href="#frequency-tables" id="toc-frequency-tables" class="nav-link" data-scroll-target="#frequency-tables"><span class="header-section-number">5.7.1</span> Frequency tables</a></li>
  <li><a href="#summary-descriptive-statistics" id="toc-summary-descriptive-statistics" class="nav-link" data-scroll-target="#summary-descriptive-statistics"><span class="header-section-number">5.7.2</span> Summary descriptive statistics</a></li>
  </ul></li>
  <li><a href="#selecting-subsets" id="toc-selecting-subsets" class="nav-link" data-scroll-target="#selecting-subsets"><span class="header-section-number">5.8</span> Selecting subsets</a></li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary"><span class="header-section-number">5.9</span> Summary</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./5_r_ISA1.html">Introduction to Statistical Analysis (Y1)</a></li><li class="breadcrumb-item"><a href="./5_r_ISA1.html"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">ISA 1: entering, importing, summarizing and subsetting data</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">ISA 1: entering, importing, summarizing and subsetting data</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Welcome to your first ISA tutorial! We assume that you have familiarized yourselves with the content from the previous four chapters, but, if not, you will have the time today to catch up on this.</p>
<section id="r-outcomes" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="r-outcomes"><span class="header-section-number">5.1</span> R outcomes</h2>
<p>After this tutorial, you can:</p>
<ol type="1">
<li>Enter new data</li>
<li>Import and work with existing data</li>
<li>Create frequency tables</li>
<li>Select subsets of data using <code>dplyr::filter</code></li>
</ol>
</section>
<section id="required-packages" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="required-packages"><span class="header-section-number">5.2</span> Required packages</h2>
<p>You will need the following additional packages:</p>
<ul>
<li><code>dplyr</code> (but we will simply install the <code>tidyverse</code> collection so that we also have the pipe operator - <code>%&gt;%</code> - loaded)</li>
<li><code>haven</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(haven)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="first-create-a-project" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="first-create-a-project"><span class="header-section-number">5.3</span> First, create a project!</h2>
<p>Follow the <a href="./1_r_markdown_basics.html#sec-newproj">instructions in Chapter 1 of this book</a> to create a new R project where you can store all of your ISA scripts, assignments, and datasets. Opening an R Studio session with the newly-created project icon will set the project folder as your home directory, meaning that - if you store all the course datasets here - loading datasets can be performed smoothly without having to enter long directory pathnames to point R to the file you want to load.</p>
</section>
<section id="entering-data" class="level2" data-number="5.4">
<h2 data-number="5.4" class="anchored" data-anchor-id="entering-data"><span class="header-section-number">5.4</span> Entering data</h2>
<p>We will work almost exclusively with dataframes on this course. These are essentially tables, where rows correspond to observations on the <em>unit of analysis</em> (e.g., mice, people, countries), and columns correspond to variables (e.g., fur colour, occupation, GDP per capita).</p>
<p>Let’s create a new dataframe of student names and ages:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>students<span class="ot">&lt;-</span><span class="fu">data.frame</span>(<span class="at">names =</span> <span class="fu">c</span>(<span class="st">"Matthew"</span>,<span class="st">"Mark"</span>,<span class="st">"Luke"</span>,<span class="st">"John"</span>), <span class="at">age =</span> <span class="fu">c</span>(<span class="dv">18</span>,<span class="dv">19</span>,<span class="dv">18</span>,<span class="dv">20</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Above, we assigned a dataframe to the name <code>students</code> with the <code>&lt;-</code> operator (an alternative to “=” - which also works - used by R). We then told R that we wanted to create a dataframe with variables <code>names</code> and <code>age</code>, and we provided some values to both of those variables. Here, the <code>c()</code> is used to concatenate individual entries into a column vector.</p>
<p>To see our new dataframe in all of its glory, we can simply type its name at the console:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>students</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    names age
1 Matthew  18
2    Mark  19
3    Luke  18
4    John  20</code></pre>
</div>
</div>
<p>If we only want to show a particular variable from the frame, then we type the name of the dataframe and the name of the variable we want to see, separated by the <code>$</code> operator:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>students<span class="sc">$</span>age</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 18 19 18 20</code></pre>
</div>
</div>
</section>
<section id="measures-of-central-tendency" class="level2" data-number="5.5">
<h2 data-number="5.5" class="anchored" data-anchor-id="measures-of-central-tendency"><span class="header-section-number">5.5</span> Measures of central tendency</h2>
<p>In this course, we will consider three measures of central tendency.</p>
<section id="the-arithmetic-mean" class="level3" data-number="5.5.1">
<h3 data-number="5.5.1" class="anchored" data-anchor-id="the-arithmetic-mean"><span class="header-section-number">5.5.1</span> The arithmetic mean</h3>
<p>This is usually represented by one of two formulae:</p>
<ol class="example" type="1">
<li><p><span class="math inline">\(\bar{x} = \frac{1}{n} \sum\limits_{i = 1}^{n}x_i\)</span></p></li>
<li><p><span class="math inline">\(\bar{x} = \frac{\sum_{i = 1}^{n}x_i}{n}\)</span></p></li>
</ol>
<p>Straighforwardly: sum all scores and divide by the total number of scores. In R, the arithmetic mean is given by the <code>mean</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(students<span class="sc">$</span>age)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 18.75</code></pre>
</div>
</div>
<p>Strictly speaking, the mean can only be sensibly calculated for interval/ratio level data.</p>
</section>
<section id="the-median" class="level3" data-number="5.5.2">
<h3 data-number="5.5.2" class="anchored" data-anchor-id="the-median"><span class="header-section-number">5.5.2</span> The median</h3>
<p>This is the 50th percentile in the dataset (i.e., it divides the data into a lower half and an upper half). It is obtained by ranking scores and finding the value which divides the dataset in two.</p>
<p>For data <span class="math inline">\(x\)</span> with <span class="math inline">\(n\)</span> elements:</p>
<ul>
<li><p>if <span class="math inline">\(n\)</span> is <strong>odd</strong>, <span class="math inline">\(med(x) = x_{(n+1)/2}\)</span></p></li>
<li><p>if <span class="math inline">\(n\)</span> is <strong>even</strong>, <span class="math inline">\(med(x) = \frac{x_{(n/2)} + x_{((n/2)+1)}}{2}\)</span></p></li>
</ul>
<p>For example, in a sorted dataset with 11 values, the median will be the value at the observation ranked 6th. However, in a sorted dataset with 12 values, the median will be the arithmetic mean of the values ranked in 6th and 7th. In R, we can simply use <code>median</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">median</span>(students<span class="sc">$</span>age)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 18.5</code></pre>
</div>
</div>
<p>The median can be used to summarize both interval/ratio and ordinal variables.</p>
</section>
<section id="the-mode" class="level3" data-number="5.5.3">
<h3 data-number="5.5.3" class="anchored" data-anchor-id="the-mode"><span class="header-section-number">5.5.3</span> The mode</h3>
<p>Lastly, we turn to the mode, which is simply the most frequently occurring value. At the time of writing, base R doesn’t have a function to compute the mode, so let’s write one ourselves:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Hat-tip to #https://www.geeksforgeeks.org/r-language/convert-factor-to-numeric-and-numeric-to-factor-in-r-programming/ for the facto-to-numeric conversion </span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>cusmode<span class="ot">&lt;-</span><span class="cf">function</span>(x){</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  xf<span class="ot">&lt;-</span><span class="fu">as.data.frame</span>(<span class="fu">table</span>(x))</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  modeframe<span class="ot">&lt;-</span>xf[xf<span class="sc">$</span>Freq <span class="sc">==</span> <span class="fu">max</span>(xf<span class="sc">$</span>Freq),]</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>(modeframe)[<span class="dv">1</span>]<span class="ot">&lt;-</span><span class="st">"Mode(s)"</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>  modeframe<span class="sc">$</span><span class="st">`</span><span class="at">Mode(s)</span><span class="st">`</span><span class="ot">&lt;-</span><span class="fu">as.numeric</span>(<span class="fu">as.character</span>(modeframe<span class="sc">$</span><span class="st">`</span><span class="at">Mode(s)</span><span class="st">`</span>)) </span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>(modeframe)[<span class="dv">2</span>]<span class="ot">&lt;-</span><span class="st">"Frequency"</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(modeframe)</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a><span class="fu">cusmode</span>(students<span class="sc">$</span>age)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Mode(s) Frequency
1      18         2</code></pre>
</div>
</div>
<p>Datasets can have multiple modes; for example, let’s imagine a new student joins the party:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>students[<span class="dv">5</span>,]<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">"Billy"</span>,<span class="dv">20</span>)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="fu">cusmode</span>(students<span class="sc">$</span>age)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Mode(s) Frequency
1      18         2
3      20         2</code></pre>
</div>
</div>
<p>The mode can be calculated for all measurement levels about which you have learned, but it is typically most informative when there are relatively few values which the data can take.</p>
</section>
</section>
<section id="importing-existing-data" class="level2" data-number="5.6">
<h2 data-number="5.6" class="anchored" data-anchor-id="importing-existing-data"><span class="header-section-number">5.6</span> Importing existing data</h2>
<p>We will now import some data from the <a href="https://www.europeansocialsurvey.org/">European Social Survey</a>. The data is saved as .sav, which is a file format native to the SPSS software. We use this as it contains informative labels describing the variables, but the ESS data is also available in .csv and other formats.</p>
<p>Ensure that you have the ESS data saved to your project folder and then run the following:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>ESS<span class="ot">&lt;-</span>haven<span class="sc">::</span><span class="fu">read_sav</span>(<span class="st">"ESS11.sav"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Running the <code>dplyr::glimpse</code> command will give us a quick look at the dataset, along with telling us the number of rows (human survey respondents) and columns (variables).</p>
</section>
<section id="summarizing-data" class="level2" data-number="5.7">
<h2 data-number="5.7" class="anchored" data-anchor-id="summarizing-data"><span class="header-section-number">5.7</span> Summarizing data</h2>
<section id="frequency-tables" class="level3" data-number="5.7.1">
<h3 data-number="5.7.1" class="anchored" data-anchor-id="frequency-tables"><span class="header-section-number">5.7.1</span> Frequency tables</h3>
<p>Frequency give us information about how often each unique value of a variable occurs. In R, we can use the base <code>table</code> function to show us the frequency distribution of respondents’ <code>agea</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(ESS<span class="sc">$</span>agea)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 15  16  17  18  19  20  21  22  23  24  25  26  27  28  29  30  31  32  33  34 
107 380 371 389 460 409 404 410 397 461 439 429 415 447 479 496 468 523 604 579 
 35  36  37  38  39  40  41  42  43  44  45  46  47  48  49  50  51  52  53  54 
571 541 540 633 625 567 625 637 633 659 615 602 633 644 698 662 666 700 721 684 
 55  56  57  58  59  60  61  62  63  64  65  66  67  68  69  70  71  72  73  74 
674 688 720 776 705 696 689 637 704 783 694 710 714 738 671 649 599 600 587 594 
 75  76  77  78  79  80  81  82  83  84  85  86  87  88  89  90 
575 518 485 428 375 377 314 308 282 265 212 184 148 118 103 243 </code></pre>
</div>
</div>
<p>This is a little difficult to see in the above output, but the first row shows the unique values of <code>agea</code>, while the second row gives the corresponding frequency. To make things a little more readable, let’s use some <code>dplyr</code> functions.</p>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-11"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-11-1"><a href="#annotated-cell-11-1" aria-hidden="true" tabindex="-1"></a>ESS <span class="sc">%&gt;%</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-11" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-11-2" class="code-annotation-target"><a href="#annotated-cell-11-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(agea) <span class="sc">%&gt;%</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-11" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-11-3" class="code-annotation-target"><a href="#annotated-cell-11-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="st">"Frequency"</span> <span class="ot">=</span> dplyr<span class="sc">::</span><span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-11" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-11-4" class="code-annotation-target"><a href="#annotated-cell-11-4" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="at">align =</span> <span class="st">"c"</span>)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-11" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-11" data-code-lines="2" data-code-annotation="1">Pass ESS into into <code>dplyr::group_by</code>, where we request for the data to be organized by the unique values of <code>agea</code>.</span>
</dd>
<dt data-target-cell="annotated-cell-11" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-11" data-code-lines="3" data-code-annotation="2">We use <code>dplyr::summarize</code> to reduce ESS to two variables: <code>Age</code> = the unique age values in the dataset; <code>Frequency</code> is the occurence count for each age value. <code>dplyr::n()</code> sums up all instances of a given value of <code>agea</code>.</span>
</dd>
<dt data-target-cell="annotated-cell-11" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-11" data-code-lines="4" data-code-annotation="3">We pass the output dataframe to the R Studio built-in <code>knitr::kable</code> function for generating tables, and tell it to center-justify the table columns (<code>align = "c"</code>).</span>
</dd>
</dl>
</div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: center;">agea</th>
<th style="text-align: center;">Frequency</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">15</td>
<td style="text-align: center;">107</td>
</tr>
<tr class="even">
<td style="text-align: center;">16</td>
<td style="text-align: center;">380</td>
</tr>
<tr class="odd">
<td style="text-align: center;">17</td>
<td style="text-align: center;">371</td>
</tr>
<tr class="even">
<td style="text-align: center;">18</td>
<td style="text-align: center;">389</td>
</tr>
<tr class="odd">
<td style="text-align: center;">19</td>
<td style="text-align: center;">460</td>
</tr>
<tr class="even">
<td style="text-align: center;">20</td>
<td style="text-align: center;">409</td>
</tr>
<tr class="odd">
<td style="text-align: center;">21</td>
<td style="text-align: center;">404</td>
</tr>
<tr class="even">
<td style="text-align: center;">22</td>
<td style="text-align: center;">410</td>
</tr>
<tr class="odd">
<td style="text-align: center;">23</td>
<td style="text-align: center;">397</td>
</tr>
<tr class="even">
<td style="text-align: center;">24</td>
<td style="text-align: center;">461</td>
</tr>
<tr class="odd">
<td style="text-align: center;">25</td>
<td style="text-align: center;">439</td>
</tr>
<tr class="even">
<td style="text-align: center;">26</td>
<td style="text-align: center;">429</td>
</tr>
<tr class="odd">
<td style="text-align: center;">27</td>
<td style="text-align: center;">415</td>
</tr>
<tr class="even">
<td style="text-align: center;">28</td>
<td style="text-align: center;">447</td>
</tr>
<tr class="odd">
<td style="text-align: center;">29</td>
<td style="text-align: center;">479</td>
</tr>
<tr class="even">
<td style="text-align: center;">30</td>
<td style="text-align: center;">496</td>
</tr>
<tr class="odd">
<td style="text-align: center;">31</td>
<td style="text-align: center;">468</td>
</tr>
<tr class="even">
<td style="text-align: center;">32</td>
<td style="text-align: center;">523</td>
</tr>
<tr class="odd">
<td style="text-align: center;">33</td>
<td style="text-align: center;">604</td>
</tr>
<tr class="even">
<td style="text-align: center;">34</td>
<td style="text-align: center;">579</td>
</tr>
<tr class="odd">
<td style="text-align: center;">35</td>
<td style="text-align: center;">571</td>
</tr>
<tr class="even">
<td style="text-align: center;">36</td>
<td style="text-align: center;">541</td>
</tr>
<tr class="odd">
<td style="text-align: center;">37</td>
<td style="text-align: center;">540</td>
</tr>
<tr class="even">
<td style="text-align: center;">38</td>
<td style="text-align: center;">633</td>
</tr>
<tr class="odd">
<td style="text-align: center;">39</td>
<td style="text-align: center;">625</td>
</tr>
<tr class="even">
<td style="text-align: center;">40</td>
<td style="text-align: center;">567</td>
</tr>
<tr class="odd">
<td style="text-align: center;">41</td>
<td style="text-align: center;">625</td>
</tr>
<tr class="even">
<td style="text-align: center;">42</td>
<td style="text-align: center;">637</td>
</tr>
<tr class="odd">
<td style="text-align: center;">43</td>
<td style="text-align: center;">633</td>
</tr>
<tr class="even">
<td style="text-align: center;">44</td>
<td style="text-align: center;">659</td>
</tr>
<tr class="odd">
<td style="text-align: center;">45</td>
<td style="text-align: center;">615</td>
</tr>
<tr class="even">
<td style="text-align: center;">46</td>
<td style="text-align: center;">602</td>
</tr>
<tr class="odd">
<td style="text-align: center;">47</td>
<td style="text-align: center;">633</td>
</tr>
<tr class="even">
<td style="text-align: center;">48</td>
<td style="text-align: center;">644</td>
</tr>
<tr class="odd">
<td style="text-align: center;">49</td>
<td style="text-align: center;">698</td>
</tr>
<tr class="even">
<td style="text-align: center;">50</td>
<td style="text-align: center;">662</td>
</tr>
<tr class="odd">
<td style="text-align: center;">51</td>
<td style="text-align: center;">666</td>
</tr>
<tr class="even">
<td style="text-align: center;">52</td>
<td style="text-align: center;">700</td>
</tr>
<tr class="odd">
<td style="text-align: center;">53</td>
<td style="text-align: center;">721</td>
</tr>
<tr class="even">
<td style="text-align: center;">54</td>
<td style="text-align: center;">684</td>
</tr>
<tr class="odd">
<td style="text-align: center;">55</td>
<td style="text-align: center;">674</td>
</tr>
<tr class="even">
<td style="text-align: center;">56</td>
<td style="text-align: center;">688</td>
</tr>
<tr class="odd">
<td style="text-align: center;">57</td>
<td style="text-align: center;">720</td>
</tr>
<tr class="even">
<td style="text-align: center;">58</td>
<td style="text-align: center;">776</td>
</tr>
<tr class="odd">
<td style="text-align: center;">59</td>
<td style="text-align: center;">705</td>
</tr>
<tr class="even">
<td style="text-align: center;">60</td>
<td style="text-align: center;">696</td>
</tr>
<tr class="odd">
<td style="text-align: center;">61</td>
<td style="text-align: center;">689</td>
</tr>
<tr class="even">
<td style="text-align: center;">62</td>
<td style="text-align: center;">637</td>
</tr>
<tr class="odd">
<td style="text-align: center;">63</td>
<td style="text-align: center;">704</td>
</tr>
<tr class="even">
<td style="text-align: center;">64</td>
<td style="text-align: center;">783</td>
</tr>
<tr class="odd">
<td style="text-align: center;">65</td>
<td style="text-align: center;">694</td>
</tr>
<tr class="even">
<td style="text-align: center;">66</td>
<td style="text-align: center;">710</td>
</tr>
<tr class="odd">
<td style="text-align: center;">67</td>
<td style="text-align: center;">714</td>
</tr>
<tr class="even">
<td style="text-align: center;">68</td>
<td style="text-align: center;">738</td>
</tr>
<tr class="odd">
<td style="text-align: center;">69</td>
<td style="text-align: center;">671</td>
</tr>
<tr class="even">
<td style="text-align: center;">70</td>
<td style="text-align: center;">649</td>
</tr>
<tr class="odd">
<td style="text-align: center;">71</td>
<td style="text-align: center;">599</td>
</tr>
<tr class="even">
<td style="text-align: center;">72</td>
<td style="text-align: center;">600</td>
</tr>
<tr class="odd">
<td style="text-align: center;">73</td>
<td style="text-align: center;">587</td>
</tr>
<tr class="even">
<td style="text-align: center;">74</td>
<td style="text-align: center;">594</td>
</tr>
<tr class="odd">
<td style="text-align: center;">75</td>
<td style="text-align: center;">575</td>
</tr>
<tr class="even">
<td style="text-align: center;">76</td>
<td style="text-align: center;">518</td>
</tr>
<tr class="odd">
<td style="text-align: center;">77</td>
<td style="text-align: center;">485</td>
</tr>
<tr class="even">
<td style="text-align: center;">78</td>
<td style="text-align: center;">428</td>
</tr>
<tr class="odd">
<td style="text-align: center;">79</td>
<td style="text-align: center;">375</td>
</tr>
<tr class="even">
<td style="text-align: center;">80</td>
<td style="text-align: center;">377</td>
</tr>
<tr class="odd">
<td style="text-align: center;">81</td>
<td style="text-align: center;">314</td>
</tr>
<tr class="even">
<td style="text-align: center;">82</td>
<td style="text-align: center;">308</td>
</tr>
<tr class="odd">
<td style="text-align: center;">83</td>
<td style="text-align: center;">282</td>
</tr>
<tr class="even">
<td style="text-align: center;">84</td>
<td style="text-align: center;">265</td>
</tr>
<tr class="odd">
<td style="text-align: center;">85</td>
<td style="text-align: center;">212</td>
</tr>
<tr class="even">
<td style="text-align: center;">86</td>
<td style="text-align: center;">184</td>
</tr>
<tr class="odd">
<td style="text-align: center;">87</td>
<td style="text-align: center;">148</td>
</tr>
<tr class="even">
<td style="text-align: center;">88</td>
<td style="text-align: center;">118</td>
</tr>
<tr class="odd">
<td style="text-align: center;">89</td>
<td style="text-align: center;">103</td>
</tr>
<tr class="even">
<td style="text-align: center;">90</td>
<td style="text-align: center;">243</td>
</tr>
<tr class="odd">
<td style="text-align: center;">NA</td>
<td style="text-align: center;">270</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="summary-descriptive-statistics" class="level3" data-number="5.7.2">
<h3 data-number="5.7.2" class="anchored" data-anchor-id="summary-descriptive-statistics"><span class="header-section-number">5.7.2</span> Summary descriptive statistics</h3>
<p>The base <code>summary</code> function gives us an overview of key descriptive statistics. The counts you see for <code>NA</code> (see <a href="2_r_firstdata.html#nte-na" class="quarto-xref">Note&nbsp;<span>2.2</span></a>) reflect the number of respondents for whom no information about age was recorded.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(ESS<span class="sc">$</span>agea)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
  15.00   37.00   53.00   51.69   67.00   90.00     270 </code></pre>
</div>
</div>
<p>You will notice that the mode is missing, but we can concatenate this with the output using the function <code>cusmode</code> we created above:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="fu">summary</span>(ESS<span class="sc">$</span>agea),<span class="fu">cusmode</span>(ESS<span class="sc">$</span>agea))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$Min.
[1] 15

$`1st Qu.`
[1] 37

$Median
[1] 53

$Mean
[1] 51.69323

$`3rd Qu.`
[1] 67

$Max.
[1] 90

$`NA's`
[1] 270

$`Mode(s)`
[1] 64

$Frequency
[1] 783</code></pre>
</div>
</div>
<p>This results in the output being forced to the slightly less reader-friendly list class, but allows us to easily display multiple modes where these arise.</p>
</section>
</section>
<section id="selecting-subsets" class="level2" data-number="5.8">
<h2 data-number="5.8" class="anchored" data-anchor-id="selecting-subsets"><span class="header-section-number">5.8</span> Selecting subsets</h2>
<p>Say we are interested only in the age of respondents from the Netherlands. Using the <code>dplyr::filter</code> function, we can pick those out and then summarize the <code>agea</code> variable. A useful feature of the .sav version of the ESS dataset is the variable labelling. If you enter <code>ESS$cntry</code> into the console, you get a list of the numeric values which code for different countries, but also a list of what those numeric values represent, at the bottom of the console output. However, we will ask <code>haven</code> to print only the labels for convenience.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>haven<span class="sc">::</span><span class="fu">print_labels</span>(ESS<span class="sc">$</span>cntry)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Labels:
 value          label
     1        Austria
     2        Belgium
     3    Switzerland
     4         Cyprus
     5        Germany
     6          Spain
     7        Finland
     8         France
     9 United Kingdom
    10         Greece
    11        Croatia
    12        Hungary
    13        Ireland
    14        Iceland
    15          Italy
    16      Lithuania
    17    Netherlands
    18         Norway
    19         Poland
    20       Portugal
    21         Serbia
    22         Sweden
    23       Slovenia
    24       Slovakia</code></pre>
</div>
</div>
<p>We can see that the Netherlands is represented by the value 17 in the dataset. We could now filter on this number, but it might be more informative if the variable <strong>value</strong> was the same as variable <strong>label</strong>. Thankfully, the <code>haven</code> package which we used for the data import makes this easily achievable:</p>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-15"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><a class="code-annotation-anchor" data-target-cell="annotated-cell-15" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-15-1" class="code-annotation-target"><a href="#annotated-cell-15-1" aria-hidden="true" tabindex="-1"></a>ESS <span class="ot">&lt;-</span> ESS <span class="sc">%&gt;%</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-15" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-15-2" class="code-annotation-target"><a href="#annotated-cell-15-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">cntry_text =</span> haven<span class="sc">::</span><span class="fu">as_factor</span>(cntry))</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-15" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-15" data-code-lines="1" data-code-annotation="1">Reassign <code>ESS</code> so that the operations will be saved to the dataframe.</span>
</dd>
<dt data-target-cell="annotated-cell-15" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-15" data-code-lines="2" data-code-annotation="2">Use <code>dplyr::mutate</code> to create the new variable (as it is good practice <strong>NOT</strong> to write over existing variables) and <code>haven::as_factor(cntry)</code> to assign the text label of <code>cntry</code> to each participant, instead of the numerical value.</span>
</dd>
</dl>
</div>
</div>
<p>Now, we can filter in a more transparent manner:</p>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-16"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><a class="code-annotation-anchor" data-target-cell="annotated-cell-16" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-16-1" class="code-annotation-target"><a href="#annotated-cell-16-1" aria-hidden="true" tabindex="-1"></a>ESS_NL<span class="ot">&lt;-</span>ESS <span class="sc">%&gt;%</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-16" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-16-2" class="code-annotation-target"><a href="#annotated-cell-16-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(cntry_text <span class="sc">==</span> <span class="st">"Netherlands"</span>)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-16" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-16" data-code-lines="1" data-code-annotation="1">Take <code>ESS</code></span>
</dd>
<dt data-target-cell="annotated-cell-16" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-16" data-code-lines="2" data-code-annotation="2">Use <code>dplyr::filter</code> to select only participants from the Netherlands. <code>cntry_text == "Netherlands"</code> asks the function to return only participants with a value on the variable <code>cntry_text</code> which is equal to “Netherlands”. Note the use of the <code>==</code> instead of <code>=</code>.</span>
</dd>
</dl>
</div>
</div>
<div id="nte-logoper" class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note&nbsp;5.1: Use of logical operators when subsetting or selecting
</div>
</div>
<div class="callout-body-container callout-body">
<p>You will probably rely mostly on the following:</p>
<ol type="1">
<li><code>==</code> - searches for perfect matches, as in the example above.</li>
<li><code>!=</code> - the complement of <code>==</code>. E.g, <code>dplyr::filter(cntry_text != "Netherlands")</code> means “give me all respondents who are NOT from the Netherlands”.</li>
<li><code>&amp;</code> - used when you want the selected responses to satisfy multiple conditions. E.g., <code>dplyr::filter(cntry_text == "Netherlands" &amp; agea &gt; 22)</code> means “give me all respondents from the Netherlands <strong>who are also older than (&gt; = ”greater than”) 22</strong>”.</li>
<li><code>|</code> - <strong>OR</strong> selection. Use this if you want to select responses which match at least one of the specified conditions. E.g., <code>dplyr::filter(cntry_text == "Netherlands" | agea &gt; 22)</code> will return participants who are either in the Netherlands, or older than 22, or both. Participants who meet neither criterion will be filtered out.</li>
</ol>
</div>
</div>
<p>Now that we have extracted Dutch respondents’ data, we can run create frequency tables and summary lists as previously.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(ESS_NL<span class="sc">$</span>agea)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 
 4 26 21 21 24 25 17 16 21 22 19 20 18 18 15 11 22 26 35 19 29 22 19 29 22 28 
41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 
29 28 30 22 15 26 18 23 35 29 32 38 30 34 23 34 31 25 30 25 33 28 32 33 34 29 
67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 
28 33 31 21 25 29 21 19 29 21 27  9 16 13 14 12 10  7  9  6  2  2  3  8 </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="fu">summary</span>(ESS_NL<span class="sc">$</span>agea),<span class="fu">cusmode</span>(ESS_NL<span class="sc">$</span>agea))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$Min.
[1] 15

$`1st Qu.`
[1] 35

$Median
[1] 52

$Mean
[1] 50.52249

$`3rd Qu.`
[1] 66

$Max.
[1] 90

$`NA's`
[1] 5

$`Mode(s)`
[1] 52

$Frequency
[1] 38</code></pre>
</div>
</div>
<p>While this gives us everything we need, we might wish to have a neater looking summary table. <code>dplyr</code> can help us with that:</p>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-19"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-19-1"><a href="#annotated-cell-19-1" aria-hidden="true" tabindex="-1"></a>ESS_NL <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="st">"N respondents"</span> <span class="ot">=</span> <span class="fu">n</span>(),</span>
<span id="annotated-cell-19-2"><a href="#annotated-cell-19-2" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"Min. age"</span> <span class="ot">=</span> <span class="fu">min</span>(agea, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), </span>
<span id="annotated-cell-19-3"><a href="#annotated-cell-19-3" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"Q1 age"</span> <span class="ot">=</span> <span class="fu">quantile</span>(agea, .<span class="dv">25</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="annotated-cell-19-4"><a href="#annotated-cell-19-4" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"Median age"</span> <span class="ot">=</span> <span class="fu">median</span>(agea, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="annotated-cell-19-5"><a href="#annotated-cell-19-5" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"Q3 age"</span> <span class="ot">=</span> <span class="fu">quantile</span>(agea, .<span class="dv">75</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="annotated-cell-19-6"><a href="#annotated-cell-19-6" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"Max. age"</span> <span class="ot">=</span> <span class="fu">max</span>(agea, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="annotated-cell-19-7"><a href="#annotated-cell-19-7" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"Mean age"</span> <span class="ot">=</span> <span class="fu">mean</span>(agea, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="annotated-cell-19-8"><a href="#annotated-cell-19-8" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"Modal age"</span> <span class="ot">=</span> </span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-19" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-19-9" class="code-annotation-target"><a href="#annotated-cell-19-9" aria-hidden="true" tabindex="-1"></a>                            <span class="fu">paste</span>(<span class="fu">as.character</span>(<span class="fu">cusmode</span>(agea)<span class="sc">$</span><span class="st">`</span><span class="at">Mode(s)</span><span class="st">`</span>), <span class="at">collapse =</span> <span class="st">" "</span>)</span>
<span id="annotated-cell-19-10"><a href="#annotated-cell-19-10" aria-hidden="true" tabindex="-1"></a>                            ) <span class="sc">%&gt;%</span> </span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-19" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-19-11" class="code-annotation-target"><a href="#annotated-cell-19-11" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="at">align =</span> <span class="st">"c"</span>)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-19" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-19" data-code-lines="9" data-code-annotation="1">This line helps us create a single text string should we have multiple modes. <code>as.character</code> converts input to a text string, and the <code>paste</code> function with the added option <code>collapse = " "</code> folds the multiple modes into one text string separated by a space.</span>
</dd>
<dt data-target-cell="annotated-cell-19" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-19" data-code-lines="11" data-code-annotation="2">We pass the output dataframe to <code>knitr::kable</code> to make our table neater.</span>
</dd>
</dl>
</div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 17%">
<col style="width: 11%">
<col style="width: 9%">
<col style="width: 14%">
<col style="width: 9%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 13%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">N respondents</th>
<th style="text-align: center;">Min. age</th>
<th style="text-align: center;">Q1 age</th>
<th style="text-align: center;">Median age</th>
<th style="text-align: center;">Q3 age</th>
<th style="text-align: center;">Max. age</th>
<th style="text-align: center;">Mean age</th>
<th style="text-align: center;">Modal age</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">1695</td>
<td style="text-align: center;">15</td>
<td style="text-align: center;">35</td>
<td style="text-align: center;">52</td>
<td style="text-align: center;">66</td>
<td style="text-align: center;">90</td>
<td style="text-align: center;">50.52249</td>
<td style="text-align: center;">52</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="summary" class="level2" data-number="5.9">
<h2 data-number="5.9" class="anchored" data-anchor-id="summary"><span class="header-section-number">5.9</span> Summary</h2>
<p>In this chapter, we covered:</p>
<ul>
<li>Entering new data</li>
<li>Importing existing data in .sav format</li>
<li>Calculating frequencies and descriptive statistics</li>
<li>Using <code>dplyr::filter</code> to select subsets of data</li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./4_r_knitting.html" class="pagination-link" aria-label="&quot;Knitting&quot; everything togther into a document">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">“Knitting” everything togther into a document</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./summary.html" class="pagination-link" aria-label="Summary">
        <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Summary</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>CC-BY-SA-4.0 (2025) David Fleming</p>
</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>